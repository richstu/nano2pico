#!/bin/bash

declare -a arr=("DYJetsToLL_M-50_TuneCP5_13TeV-amcatnloFXFX-pythia8__RunIISummer20UL18NanoAODv9__106X_upgrade2018_realistic_v16_L1v1-v2__40000__E3714DD9-C558-8E4F-9FD1-756BC6F83C7B.root" "DYJetsToLL_M-50_TuneCP5_13TeV-amcatnloFXFX-pythia8__RunIISummer20UL18NanoAODv9__106X_upgrade2018_realistic_v16_L1v1-v2__40000__E5FF4802-14B5-AB44-A3EA-6A969545DEE7.root" "DYJetsToLL_M-50_TuneCP5_13TeV-amcatnloFXFX-pythia8__RunIISummer20UL18NanoAODv9__106X_upgrade2018_realistic_v16_L1v1-v2__40000__ECB51118-0153-2F40-BB6D-0204F0EE98C2.root" "DYJetsToLL_M-50_TuneCP5_13TeV-amcatnloFXFX-pythia8__RunIISummer20UL18NanoAODv9__106X_upgrade2018_realistic_v16_L1v1-v2__40000__ED1257DE-CF33-5C49-AFEF-BF6BE5CC5CE8.root" "DYJetsToLL_M-50_TuneCP5_13TeV-amcatnloFXFX-pythia8__RunIISummer20UL18NanoAODv9__106X_upgrade2018_realistic_v16_L1v1-v2__40000__F027F55F-496F-1740-88EB-E9A3C3DE2EED.root" "DYJetsToLL_M-50_TuneCP5_13TeV-amcatnloFXFX-pythia8__RunIISummer20UL18NanoAODv9__106X_upgrade2018_realistic_v16_L1v1-v2__40000__F5F86716-1D1D-7E4F-9150-DB18D2A18446.root" "DYJetsToLL_M-50_TuneCP5_13TeV-amcatnloFXFX-pythia8__RunIISummer20UL18NanoAODv9__106X_upgrade2018_realistic_v16_L1v1-v2__40000__F775D7E9-2BD4-A845-8DF8-94258FD02388.root" "DYJetsToLL_M-50_TuneCP5_13TeV-amcatnloFXFX-pythia8__RunIISummer20UL18NanoAODv9__106X_upgrade2018_realistic_v16_L1v1-v2__40000__F7CB9A02-0E1C-154E-A66F-FD28E0C86C68.root" "DYJetsToLL_M-50_TuneCP5_13TeV-amcatnloFXFX-pythia8__RunIISummer20UL18NanoAODv9__106X_upgrade2018_realistic_v16_L1v1-v2__40000__F876F630-2286-684B-81E3-A2D6DF65DC07.root" "DYJetsToLL_M-50_TuneCP5_13TeV-amcatnloFXFX-pythia8__RunIISummer20UL18NanoAODv9__106X_upgrade2018_realistic_v16_L1v1-v2__40000__F97702D0-7881-134A-9866-DDD2F084ECCC.root")
#"DoubleMuon__Run2018D__UL2018_MiniAODv2_NanoAODv9-v2__2430000__D6CAD389-82A5-684D-991C-7EEBEC514D34.root" "DoubleMuon__Run2018D__UL2018_MiniAODv2_NanoAODv9-v2__2430000__55D0A19D-B34D-3A4E-928D-A2D6A28BD711.root" "DoubleMuon__Run2018D__UL2018_MiniAODv2_NanoAODv9-v2__2430000__33EF5732-7A10-8E45-988F-8651803C08BB.root" "DoubleMuon__Run2018D__UL2018_MiniAODv2_NanoAODv9-v2__2430000__A04F910F-F2DF-4C45-83EF-8F648AACF7EE.root" "DoubleMuon__Run2018D__UL2018_MiniAODv2_NanoAODv9 v2__2430000__C02687F5-7549-EA4C-9466-C996E298188D.root" "DoubleMuon__Run2018B__UL2018_MiniAODv2_NanoAODv9-v1__270000__31F4F5F6-70B9-B341-BAF0-04FB8B240192.root" "DoubleMuon__Run2018C__UL2018_MiniAODv2_NanoAODv9-v1__130000__1CB51AE7-FEC7-0646-A024-34A0C878144F.root" "DoubleMuon__Run2018D__UL2018_MiniAODv2_NanoAODv9 v2__2430000__CEFECD23-17BC-694D-AAEE-09B7CAEAFC6E.root" "DoubleMuon__Run2018B__UL2018_MiniAODv2_NanoAODv9-v1__270000__A9522567-DBC2-474B-B5CD-3667BB1ED13C.root" "DoubleMuon__Run2018B__UL2018_MiniAODv2_NanoAODv9-v1__270000__8AE6877F-91E6-914D-B346-09514695F15F.root"
#"Muon__Run2022F__22Sep2023-v2__70000__388e92d7-2e90-4bab-a4a7-ad3c15e2ccf4.root" "Muon__Run2022F__22Sep2023-v2__70000__87646574-e704-4b04-a6b2-7b9669432dc5.root" "Muon__Run2022F__22Sep2023-v2__70000__462ebb23-45c6-46cc-8736-81dfbe69a103.root" "Muon__Run2022F__22Sep2023-v2__2560000__caaa0862-77b5-4418-867d-cdcc53f166da.root" "Muon__Run2022F__22Sep2023-v2__2560000__79a97ab9-b872-493b-989b-48b09a348aef.root" "Muon__Run2022F__22Sep2023-v2__60000__1b75a371-b9c1-4957-b1ca-264a0f83a7ff.root" "Muon__Run2022F__22Sep2023-v2__70000__e3d52ee0-1f46-448d-8fe2-eb1d7b4272a7.root" "Muon__Run2022F__22Sep2023-v2__60000__4fb14b35-ab65-49f0-8d2a-55d4e51cfd3a.root" "Muon__Run2022F__22Sep2023-v2__60000__8f7f1a40-6edf-423d-b965-48b17f207052.root" "Muon__Run2022F__22Sep2023-v2__2560000__445c0bcc-26bf-436d-b4c8-c50f30d05676.root"
#"DYJetsToLL_M-50_TuneCP5_13TeV-amcatnloFXFX-pythia8__RunIISummer20UL18NanoAODv9__106X_upgrade2018_realistic_v16_L1v1-v2__40000__E3714DD9-C558-8E4F-9FD1-756BC6F83C7B.root" "DYJetsToLL_M-50_TuneCP5_13TeV-amcatnloFXFX-pythia8__RunIISummer20UL18NanoAODv9__106X_upgrade2018_realistic_v16_L1v1-v2__40000__E5FF4802-14B5-AB44-A3EA-6A969545DEE7.root" "DYJetsToLL_M-50_TuneCP5_13TeV-amcatnloFXFX-pythia8__RunIISummer20UL18NanoAODv9__106X_upgrade2018_realistic_v16_L1v1-v2__40000__ECB51118-0153-2F40-BB6D-0204F0EE98C2.root" "DYJetsToLL_M-50_TuneCP5_13TeV-amcatnloFXFX-pythia8__RunIISummer20UL18NanoAODv9__106X_upgrade2018_realistic_v16_L1v1-v2__40000__ED1257DE-CF33-5C49-AFEF-BF6BE5CC5CE8.root" "DYJetsToLL_M-50_TuneCP5_13TeV-amcatnloFXFX-pythia8__RunIISummer20UL18NanoAODv9__106X_upgrade2018_realistic_v16_L1v1-v2__40000__F027F55F-496F-1740-88EB-E9A3C3DE2EED.root" "DYJetsToLL_M-50_TuneCP5_13TeV-amcatnloFXFX-pythia8__RunIISummer20UL18NanoAODv9__106X_upgrade2018_realistic_v16_L1v1-v2__40000__F5F86716-1D1D-7E4F-9150-DB18D2A18446.root" "DYJetsToLL_M-50_TuneCP5_13TeV-amcatnloFXFX-pythia8__RunIISummer20UL18NanoAODv9__106X_upgrade2018_realistic_v16_L1v1-v2__40000__F775D7E9-2BD4-A845-8DF8-94258FD02388.root" "DYJetsToLL_M-50_TuneCP5_13TeV-amcatnloFXFX-pythia8__RunIISummer20UL18NanoAODv9__106X_upgrade2018_realistic_v16_L1v1-v2__40000__F7CB9A02-0E1C-154E-A66F-FD28E0C86C68.root" "DYJetsToLL_M-50_TuneCP5_13TeV-amcatnloFXFX-pythia8__RunIISummer20UL18NanoAODv9__106X_upgrade2018_realistic_v16_L1v1-v2__40000__F876F630-2286-684B-81E3-A2D6DF65DC07.root" "DYJetsToLL_M-50_TuneCP5_13TeV-amcatnloFXFX-pythia8__RunIISummer20UL18NanoAODv9__106X_upgrade2018_realistic_v16_L1v1-v2__40000__F97702D0-7881-134A-9866-DDD2F084ECCC.root"


export INDIR="/net/cms11/cms11r0/pico/NanoAODv9/nano/2018/mc/"
for i in "${arr[@]}"
do
   export INFILE=$i
   ./run/process_nano.exe --in_file $INFILE --in_dir $INDIR --out_dir out/zgamma/ --nent -1
done

for i in "${arr[@]}"
do
    export INFILE=$i
    ./run/merge_corrections.exe out/zgamma/corrections/corr_$INFILE out/zgamma/wgt_sums/wgt_sums_$INFILE
done

for i in "${arr[@]}"
do
    export INFILE=$i
    ./run/apply_corrections.exe --in_file raw_pico_$INFILE --in_dir out/zgamma/raw_pico/ --corr_file corr_$INFILE
done

